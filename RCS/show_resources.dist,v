head	1.4;
access;
symbols;
locks; strict;
comment	@# @;


1.4
date	2002.07.15.19.23.17;	author kenneth;	state Exp;
branches;
next	1.3;

1.3
date	2001.12.14.18.31.25;	author kenneth;	state Exp;
branches;
next	1.2;

1.2
date	2001.10.31.23.08.38;	author kenneth;	state Exp;
branches;
next	1.1;

1.1
date	2001.09.12.22.34.20;	author kenneth;	state Exp;
branches;
next	;


desc
@show resource info
@


1.4
log
@sort by simple name of resource
@
text
@#!___PYTHON_PATH_PLACEHOLDER___
# script to query the resource database

import Catalina
import string

DB = Catalina.RESOURCE_DB

def by_name(first, second) :
    first_number = first['name']
    second_number = second['name']
    if first_number < second_number :
        return -1
    if first_number == second_number :
        return 0
    if first_number > second_number :
        return 1

db_handle = Catalina.open_ro_db(DB,'read')
resource_list = Catalina.get_object_list(db_handle)

print 160 * '-'
print "Name            Machine   Arch     OpSys Feature                     Max_Starters Memory   Cpus Pool    State   ConfiguredClasses#AvailableClasses#Adapter"
print 160 * '-'

resource_list.sort(by_name)

for resource in resource_list :
    if resource.has_key('ConfiguredClasses_list') and resource['ConfiguredClasses_list'] != None :
        conf_dict = {}
        for res in resource['ConfiguredClasses_list'] :
            if conf_dict.has_key(res) :
                conf_dict[res] = conf_dict[res] + 1
            else :
                conf_dict[res] = 1
        configured_classes = ''
        for job_class in conf_dict.keys() :
            configured_classes = configured_classes + job_class + '(' + "%s" % conf_dict[job_class] + ')'
    else :
        configured_classes = None
    print "configured_classes (%s)" % configured_classes
    print "%6s %15s %8s %8s %27s %2s         %6s    %2s    %2s %12s %s#%s#%s" % (
    resource['name'],
    resource['Machine'],
    resource['Arch'],
    resource['OpSys'],
    resource['Feature'],
    resource['Max_Starters'],
    resource['Memory'],
    resource['Cpus'],
    resource['Pool'],
    resource['State'],
    configured_classes,
    resource['AvailableClasses'],
    resource['Adapter'])

Catalina.close_ro_db(db_handle)
@


1.3
log
@changed to ConfiguredClasses_list
@
text
@d10 2
a11 2
    first_number = string.atoi(first['name'][2:5])
    second_number = string.atoi(second['name'][2:5])
@


1.2
log
@changed 'resource' to Catalina.RESOURCE_DB
@
text
@d29 13
d53 1
a53 1
    resource['ConfiguredClasses'],
@


1.1
log
@Initial revision
@
text
@d7 1
a7 1
DB = 'resource'
@
