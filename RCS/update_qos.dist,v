head	1.2;
access;
symbols;
locks; strict;
comment	@# @;


1.2
date	2003.10.28.22.06.09;	author kenneth;	state Exp;
branches;
next	1.1;

1.1
date	2001.09.12.21.32.00;	author kenneth;	state Exp;
branches;
next	;


desc
@set the QOS for a job
@


1.2
log
@changed --job_step_id to --job
@
text
@#!___PYTHON_PATH_PLACEHOLDER___
# script to update QOS of a job

import Catalina
import sys
import getopt

usage_string = \
"""Usage: update_qos --job=<job id>
               --QOS=<desired QOS>"""

options = ['?', 'help', 'job=', 'QOS=']

args = sys.argv[1:]
argdict = {}
optlist, lineargs = getopt.getopt(args, '', options)
for pair in optlist :
    argdict[pair[0]] = pair[1]
    if pair[0] == '--job' :
        job = pair[1]
    elif pair[0] == '--QOS' :
        QOS = pair[1]

if argdict.has_key('--?') or argdict.has_key('--help') :
    print usage_string
    sys.exit(0)
if not argdict.has_key('--job') or not argdict.has_key('--QOS') :
    print usage_string
    sys.exit(1)

JOBS_DB = 'jobs'

jobs_db_handle = Catalina.open_db(JOBS_DB,'write')

try :
    temp_job = Catalina.get_object(job, jobs_db_handle)
except 'KeyNotFound' :
    print "Job (%s) not found in Catalina DB" % job
    Catalina.close_db(jobs_db_handle)
    sys.exit(1)

Catalina.update_object_attribute( 'QOS', QOS, temp_job, jobs_db_handle )

Catalina.close_db(jobs_db_handle)
@


1.1
log
@Initial revision
@
text
@d8 5
a12 1
options = ['job_step_id=', 'QOS=']
d15 1
d18 3
a20 2
    if pair[0] == '--job_step_id' :
        job_step_id = pair[1]
d24 7
d36 1
a36 1
    temp_job = Catalina.get_object(job_step_id, jobs_db_handle)
d38 1
a38 1
    print "Job (%s) not found in Catalina DB" % job_step_id
@
